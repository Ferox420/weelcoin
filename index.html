<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram WebApp Debug</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Custom function to log to UI
        function logToUI(message) {
            const logContainer = document.getElementById('log-output');
            const newLog = document.createElement('p');
            newLog.textContent = message;
            logContainer.appendChild(newLog);
        }

        // Override console.log to output to the UI
        console.log = logToUI;

        document.addEventListener('DOMContentLoaded', () => {
            // Log when the page is loaded
            console.log("Page loaded, checking Telegram WebApp...");

            // Check if the Telegram WebApp API is available
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();  // Initialize WebApp
                console.log("Telegram WebApp initialized successfully!");

                // Add event listener for the Invite Friends button
                document.getElementById('invite-btn').addEventListener('click', function () {
                    console.log("Invite button clicked.");

                    // Check if the Contact Picker is available
                    if (Telegram.WebApp.showContactPicker) {
                        console.log("Contact Picker is available, opening...");

                        // Open the Contact Picker
                        Telegram.WebApp.showContactPicker({
                            multiple: true,
                            onSelect: function (contacts) {
                                if (contacts.length > 0) {
                                    contacts.forEach(contact => {
                                        console.log(`Selected contact: ${contact.first_name} ${contact.last_name}`);
                                    });
                                } else {
                                    console.log("No contacts selected.");
                                }
                            }
                        });
                    } else {
                        console.log("Contact Picker is not available.");
                    }
                });
            } else {
                console.log("Telegram WebApp is not initialized.");
            }
        });
    </script>
</head>
<body>
    <h1>Debug Telegram WebApp</h1>

    <!-- Button to trigger the Contact Picker -->
    <button id="invite-btn">Invite Friends</button>

    <!-- Log Output Section -->
    <div id="log-output" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px; background-color: #f9f9f9;">
        <h4>Debug Log:</h4>
    </div>
</body>
</html>
